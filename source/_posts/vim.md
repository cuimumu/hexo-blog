---
title: vim 常用操作
---

## 模式
VIM常用模式:
- 正常模式 (Normal-mode)
- 插入模式 (Insert-mode)
- 命令模式 (Command-mode)
- 可视模式 (Visual-mode)  
- 改写模式 (Replace-mode)  

### 正常模式
`Esc` `ctrl-c` `ctrl-[` 进入Normal模式   
### 插入模式
`i` `a` `o` `s` `r` 进入Insert模式  
Normal mode 切换到 Insert mode：  
`i` 进入Insert mode，并且让光标处于当前字符之前  
`I` 进入Insert mode，并且光标处于当前行的第一个非空字符前  
`a` 进入Insert mode，并且光标处于当前字符之后  
`A` 进入Insert mode， 并且光标处于当前行尾  
`o` 进入Insert mode，并在当前行后新起一行，光标位于新行  
`O` 进入Insert mode，并在当前行上边插入新行，光标位于新行  
`s` 删除当前字符，然后进入Insert mode  
`S` 删除当前行，然后进入Insert mode  

### 命令模式
`:` 进入Command模式
### 可视模式
`v` 进入Visual mode，逐个字符选择文本    
`V` 进入Visual mode，逐行选择文本   
`ctrl-v` 进入Visual mode，按照块的方式选择文本  
`o` 选中块对角切换  
`O` 同行内角切换  
### 改写模式  
`R`

## 行号
显示行号 `: set nu`  
取消显示 `：set nonu`  
永久显示需要修改配置文件 `vim   ~/.vimrc` 新建空文件，添加`set nu`，保存退出
`:n` 将光标移到第 n 行  

## 光标
命令行模式:  
`nj` 向下移动n行 hjkl类似  
`gg` 跳到文件开始  
`G` 跳到文件结束  
`nG` 跳到第n行  
`n+` 光标下移n行  
`n-` 光标上移n行  
`H` 跳到页面上方  
`M` 跳到页面中间  
`L` 跳到页面下方  
`w` `W` 跳到下一个单词开始  
`e` `E` 跳到单词结束  
`b` `B` 向前跳一个单词   
`(` 跳到句首    
`)` 跳到句尾    
`{` 跳到段落开头  
`}` 跳到段落结尾  
`0` 跳到行首  
`^` 跳到行首（非空白字符）  
`$` 跳到行尾  

## 滚屏
`ctrl-u` 向上滚半屏  
`ctrl-d` 向下滚半屏  
`ctrl-f` 向下滚一屏  
`ctrl-b` 向上滚一屏  
`ctrl-p` 向上滚一行  
`ctrl-n` 向下滚一行  

`zz` 当前行滚至页中  
`zt` 当前行滚至页首  
`zb` 当前行滚至页尾  
`nzz` `nzt` `nzb` 第n行滚至页中、页首、页尾  

## 删除  
`rx` 用 x 替换光标所指向的当前字符  
`nrx` 用 x 替换光标所指向的前 n 个字符
`x` 删除光标所在位置后面的一个字符  
`nx` 删除光标所在位置后面的 n 个字符  
`X` 删除光标所在位置前面的一个字符  
`nX` 删除光标所在位置前面的 n 个字符  
`dd` 删除光标所在行，并去除空隙  
`ndd` 从光标所在行开始删除 n 行内容，并去除空隙  


## 复制  
`yy` 复制当前行到内存缓冲区  
`nyy` 复制 n 行内容到内存缓冲区

## 粘贴  
`p` 将缓冲区的内容粘贴到光标的后面  
`P` 将缓冲区的内容粘贴到光标的前面   

## 查找  


`/word` 从上往下查找word字符串  
`?word` 从下往上查找word字符串  
`n` 查找下一处  
`N` 查找上一处  

## 替换  
> g - global全局  
 s - switch替换  

`:s/old/new` 用new替换行中首次出现的old  
`:s/old/new/g` 用new替换行中所有出现的old  
`:m,n s/old/new/g` 用new替换从第m行到第n行中出现的old  
`:%s/old/new/g` `:1,$ s/old/new/g`用new替换整个文件中出现的old，%等价于1，$  

## 撤销
`u` 取消最近一次操作  
`U` 取消所有操作  
`ctrl-r` 恢复对使用u命令的操作
`.` 重复最后一条修改正文的命令  

## 恢复文件  
> vi在编辑某一个文件时，会生成一个临时文件，这个文件以 . 开头并以 .swp结尾。正常退出该文件自动删除，如果意外退出例如忽然断电，该文件不会删除，我们在下次编辑时可以选择一下命令处理：

- `O` 只读打开，不改变文件内容
- `E` 继续编辑文件，不恢复.swp文件保存的内容
- `R` 将恢复上次编辑以后未保存文件内容
- `Q` 退出vi
- `D` 删除.swp文件
- 或者使用 `vi -r 文件名` 来恢复未保存的内容  
